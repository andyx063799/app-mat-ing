<!DOCTYPE html>
<html lang="es" class="transition-all duration-300">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Vector Gradiente</title>
    <link rel="stylesheet" href="./styles/app.css">
    <!-- Carga de Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuración de Tailwind -->
    <script src="./config/appConfig.js"></script>
    <!-- Carga de Math.js CDN para cálculos -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/12.4.1/math.js"></script>
</head>
<body class="min-h-screen flex items-center justify-center p-4 bg-gray-100 dark:bg-gray-900 transition-all duration-300">

    <div class="w-full max-w-4xl bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-6 md:p-10 transition-all duration-300">
        
        <!-- Header con el Toggle de Tema -->
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-3xl md:text-4xl font-extrabold text-gray-900 dark:text-gray-100">
                Calculadora de Vector Gradiente
            </h1>
            <!-- Botón de Toggle de Tema -->
            <button id="theme-toggle" class="p-2 rounded-full text-gray-500 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500" aria-label="Toggle theme">
                <!-- Icono de Sol (Modo Claro) -->
                <svg id="sun-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                <!-- Icono de Luna (Modo Oscuro) -->
                <svg id="moon-icon" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
            </button>
        </div>

        <p class="text-center text-gray-500 dark:text-gray-400 mb-8">
            Ingresa una función y (opcionalmente) un punto para calcular el gradiente.
        </p>

        <!-- Formulario de Entrada -->
        <div class="space-y-6">

            <!-- Selección de Variables -->
            <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Cantidad de Variables (n):
                </label>
                <div class="flex space-x-4">
                    <!-- Los estilos de los botones se manejan de forma dinamica como esta aqui -->
                    <button id="vars-2" data-vars="2" class="var-btn px-4 py-2 rounded-lg font-semibold text-white bg-indigo-600 hover:bg-indigo-700 dark:bg-indigo-700 dark:hover:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all shadow-md">
                        2 Variables (x, y)
                    </button>
                    <button id="vars-3" data-vars="3" class="var-btn px-4 py-2 rounded-lg font-semibold text-indigo-700 bg-indigo-100 hover:bg-indigo-200 dark:text-indigo-200 dark:bg-indigo-900/50 dark:hover:bg-indigo-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all shadow-md">
                        3 Variables (x, y, z)
                    </button>
                </div>
            </div>

            <!-- Input de Función -->
            <div>
                <label for="function-input" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                    Función f(x, y) o f(x, y, z):
                </label>
                <input type="text" id="function-input" placeholder="Ej: sin(x*y) + z^2" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition-shadow shadow-sm">
            </div>

            <!-- Inputs de Punto (estos ya se controlan con js) -->
            <div id="point-inputs" class="grid grid-cols-2 md:grid-cols-3 gap-4">
                <div id="point-x-container">
                    <label for="point-x" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Punto x (Opcional):
                    </label>
                    <input type="number" id="point-x" placeholder="1" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 shadow-sm">
                </div>
                <div id="point-y-container">
                    <label for="point-y" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Punto y (Opcional):
                    </label>
                    <input type="number" id="point-y" placeholder="2" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 shadow-sm">
                </div>
                <div id="point-z-container" class="hidden">
                    <label for="point-z" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Punto z (Opcional):
                    </label>
                    <input type="number" id="point-z" placeholder="3" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 shadow-sm">
                </div>
            </div>

            <!-- Botones de Acción -->
            <div class="flex flex-col md:flex-row space-y-4 md:space-y-0 md:space-x-4 pt-4">
                <button id="calculate-btn" class="flex-1 w-full px-6 py-3 text-lg font-bold rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 dark:bg-indigo-700 dark:hover:bg-indigo-600 focus:outline-none focus:ring-4 focus:ring-indigo-500/50 transition-all shadow-xl shadow-indigo-200/50 dark:shadow-indigo-900/50">
                    Calcular Gradiente
                </button>
                <button id="clear-btn" class="w-full md:w-auto px-6 py-3 text-base font-semibold rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300 dark:text-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-400 transition-all shadow-lg">
                    Limpiar Campos
                </button>
            </div>
        </div>

        <!-- Panel de Resultados y Procedimiento -->
        <div id="result-panel" class="mt-10 pt-6 border-t border-gray-200 dark:border-gray-700 hidden">
            <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 mb-4 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-indigo-600 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                </svg>
                Resultados
            </h2>

            <!-- Procedimiento -->
            <div id="procedure-output" class="mb-6 p-4 bg-indigo-50 border-l-4 border-indigo-400 dark:bg-indigo-900/30 dark:border-indigo-600 rounded-md">
                <h3 class="text-lg font-semibold text-indigo-800 dark:text-indigo-200 mb-2">Procedimiento Paso a Paso</h3>
                <div id="procedure-content" class="text-gray-700 dark:text-gray-200 space-y-2">
                    <!-- Contenido del procedimiento -->
                </div>
            </div>
            
            <!-- Resultado Final -->
            <div id="final-result-output" class="p-6 bg-indigo-600 text-white rounded-xl shadow-xl">
                <h3 class="text-xl font-bold mb-2 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 4.016A11.955 11.955 0 002.944 12c.045.794.129 1.577.245 2.348A11.955 11.955 0 0012 21.056a11.955 11.955 0 008.811-6.708.232.232 0 00.106-.179c.002-.126.002-.252.002-.378s0-.252-.002-.378a.232.232 0 00-.106-.179z" />
                    </svg>
                    Vector Gradiente Final ∇f
                </h3>
                <div id="final-result-content" class="text-2xl font-extrabold mt-4 math-expr text-white">
                    <!-- Contenido del resultado final. El color del texto se mantiene blanco aquí -->
                </div>
            </div>
        </div>

        <!-- Mensaje de Error/Advertencia -->
        <div id="message-box" class="mt-6 p-4 text-sm rounded-lg transition-all duration-300 hidden" role="alert">
            <!-- Contenido del mensaje -->
        </div>
    </div>

    <!-- Logica de la Aplicacion -->
    <script src="./js/main.js"></script>
</body>
</html>